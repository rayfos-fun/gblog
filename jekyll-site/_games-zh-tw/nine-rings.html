---
title: "九連環"
layout: post
lang: zh-tw
permalink: /zh-tw/game/nine-rings/
date: 2025-09-25
---
<div class="game-wrapper">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
      .container {
          background-color: #ffffff;
          border-radius: 1.5rem;
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
          padding: 2rem;
          max-width: 90%;
          width: 100%;
          text-align: center;
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
          align-items: center;
      }
      .rings-container {
          display: flex;
          flex-direction: row;
          justify-content: center;
          align-items: center;
          flex-wrap: wrap;
          gap: 0.75rem;
      }
      .ring {
          width: 50px;
          height: 50px;
          background-color: #cbd5e1;
          border-radius: 9999px;
          display: flex;
          justify-content: center;
          align-items: center;
          font-weight: bold;
          color: #1e293b;
          transition: all 0.3s ease-in-out;
          cursor: pointer;
          flex-shrink: 0;
      }
      .ring.off {
          background-color: #4b5563;
          color: #f8fafc;
          transform: translateY(20px);
      }
      .ring:hover:not(.off) {
          transform: scale(1.05);
      }
      .ring.off:hover {
          transform: scale(1.05) translateY(20px);
      }
      .instructions-list {
          list-style-type: decimal;
          text-align: left;
          padding-left: 1.5rem;
      }
      .instructions-list li {
          margin-bottom: 0.5rem;
      }
      .btn {
          padding: 0.75rem 1.5rem;
          border-radius: 0.75rem;
          font-weight: 700;
          transition: all 0.2s ease-in-out;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }
      .btn-primary {
          background-color: #3b82f6;
          color: #ffffff;
      }
      .btn-primary:hover {
          background-color: #2563eb;
          transform: translateY(-2px);
      }
      .btn-secondary {
          background-color: #9ca3af;
          color: #ffffff;
      }
      .btn-secondary:hover {
          background-color: #6b7280;
          transform: translateY(-2px);
      }
      #message-box {
          position: fixed;
          top: 2rem;
          left: 50%;
          transform: translateX(-50%);
          background-color: #10b981;
          color: #ffffff;
          padding: 1rem 2rem;
          border-radius: 0.75rem;
          font-weight: bold;
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
          opacity: 0;
          transition: opacity 0.5s ease-in-out;
          z-index: 10;
      }
      #message-box.show {
          opacity: 1;
      }
      #moves-counter {
          font-size: 1.25rem;
          font-weight: 700;
      }
  </style>

  <div class="container">
      <h1 class="text-3xl font-bold text-center">九連環遊戲</h1>
      <p class="text-sm text-gray-500">點擊環來取下或裝上它們。目標是將所有環取下。</p>

      <div class="rings-container" id="rings">
          <!-- Rings will be generated by JavaScript -->
      </div>

      <div class="flex flex-col gap-2">
          <p id="moves-counter">步數: 0</p>
          <button id="reset-btn" class="btn btn-secondary">重設遊戲</button>
      </div>
  </div>

  <div id="message-box" class="message-box"></div>

<script>
    const NUM_RINGS = 9;
    let ringsState = [];
    let moves = 0;
    const ringsContainer = document.getElementById('rings');
    const movesCounter = document.getElementById('moves-counter');
    const resetBtn = document.getElementById('reset-btn');
    const messageBox = document.getElementById('message-box');

    // Show a message box with a given text
    function showMessage(text) {
        messageBox.textContent = text;
        messageBox.classList.add('show');
        setTimeout(() => {
            messageBox.classList.remove('show');
        }, 3000);
    }

    // Initialize the game state and UI
    function initGame() {
        ringsState = new Array(NUM_RINGS).fill(true); // true = on, false = off
        moves = 0;
        updateUI();
        showMessage('遊戲已重設！');
    }

    // Update the visual representation of the rings
    function updateUI() {
        ringsContainer.innerHTML = ''; // Clear previous rings
        ringsState.forEach((isOn, index) => {
            const ringDiv = document.createElement('div');
            ringDiv.className = `ring transition-all ${isOn ? '' : 'off'}`;
            ringDiv.textContent = `${NUM_RINGS - index}`; // 數字從右到左排列
            ringDiv.dataset.index = index;
            ringDiv.addEventListener('click', () => toggleRing(index));
            ringsContainer.appendChild(ringDiv);
        });
        movesCounter.textContent = `步數: ${moves}`;
    }

    // Toggle a ring based on the new rules
    function toggleRing(index) {
        let isMovable = false;

        // Rule 1: The rightmost ring (index 8, labeled as 1) can always be moved.
        if (index === NUM_RINGS - 1) {
            isMovable = true;
        }
        // Rule 2: For any other ring (n), it can be moved if the ring to its immediate right (n-1) is ON, AND all rings to the right of n-1 (1 through n-2) are OFF.
        else {
            const rightRingOn = ringsState[index + 1] === true;
            let allAfterAreOff = true;
            for (let i = index + 2; i < NUM_RINGS; i++) {
                if (ringsState[i] === true) {
                    allAfterAreOff = false;
                    break;
                }
            }
            if (rightRingOn && allAfterAreOff) {
                isMovable = true;
            }
        }

        if (isMovable) {
            ringsState[index] = !ringsState[index];
            moves++;
            updateUI();
            checkWinCondition();
        } else {
            showMessage('無法移動此環。請檢查規則。');
        }
    }

    // Check if the game is won
    function checkWinCondition() {
        const isAllOff = ringsState.every(state => state === false);
        if (isAllOff) {
            showMessage(`恭喜！你以 ${moves} 步完成遊戲！`);
        }
    }

    // Add event listeners
    resetBtn.addEventListener('click', initGame);

    // Initial game setup
    initGame();

</script>
</div>
